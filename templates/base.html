<!doctype html>
<html lang="cs">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Hueppe - spr√°va zak√°zek</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    /* CSS Custom Properties pro t√©mata */
    :root {
      --bg-color: #ffffff;
      --bg-secondary: #f8f9fa;
      --text-color: #212529;
      --text-muted: #6c757d;
      --border-color: #dee2e6;
      --card-bg: #ffffff;
      --navbar-bg: #ffebee;
      --input-bg: #ffffff;
      --input-border: #ced4da;
      --table-bg: #ffffff;
      --table-stripe: rgba(0, 0, 0, 0.05);
      --table-hover: rgba(0, 0, 0, 0.075);
      --alert-bg: #d1ecf1;
      --shadow: rgba(0, 0, 0, 0.125);
      --link-color: #0d6efd;
      --success-bg: #d1f2eb;
      --danger-bg: #f8d7da;
      --warning-bg: #fff3cd;
      --info-bg: #d1ecf1;

      /* Lane barvy pro light mode */
      --lane-1-border: #0d6efd;
      --lane-1-bg: #f8f9ff;
      --lane-2-border: #0dcaf0;
      --lane-2-bg: #f0fbff;
      --lane-3-border: #ffc107;
      --lane-3-bg: #fffdf0;
    }

    /* Dark mode promƒõnn√© - vylep≈°en√© pro lep≈°√≠ ƒçitelnost */
    [data-theme="dark"] {
      --bg-color: #1a1a1a;
      --bg-secondary: #2d2d2d;
      --text-color: #f8f9fa;
      --text-muted: #adb5bd;
      --border-color: #495057;
      --card-bg: #262626;
      --navbar-bg: #343a40;
      --input-bg: #363636;
      --input-border: #6c757d;
      --table-bg: #262626;
      --table-stripe: rgba(255, 255, 255, 0.05);
      --table-hover: rgba(255, 255, 255, 0.1);
      --alert-bg: #2d3748;
      --shadow: rgba(0, 0, 0, 0.7);
      --link-color: #66b3ff;
      --success-bg: #1e4d3a;
      --danger-bg: #5a1e1e;
      --warning-bg: #4d3d1a;
      --info-bg: #1a3d4d;

      /* Lane barvy pro dark mode - kontrastnƒõj≈°√≠ */
      --lane-1-border: #66b3ff;
      --lane-1-bg: #1a2e4d;
      --lane-2-border: #4dd0e7;
      --lane-2-bg: #1a3e4d;
      --lane-3-border: #ffd700;
      --lane-3-bg: #4d3d1a;
    }

    /* Pink mode promƒõnn√© */
    [data-theme="pink"] {
      --bg-color: #fef7f7;
      --bg-secondary: #fce7e7;
      --text-color: #2d1b1b;
      --text-muted: #8b5b5b;
      --border-color: #f5c2c2;
      --card-bg: #fef0f0;
      --navbar-bg: #fcdddd;
      --input-bg: #fff5f5;
      --input-border: #f5c2c2;
      --table-bg: #fef0f0;
      --table-stripe: rgba(255, 182, 193, 0.15);
      --table-hover: rgba(255, 182, 193, 0.25);
      --alert-bg: #fce4ec;
      --shadow: rgba(219, 112, 147, 0.2);
      --link-color: #c2185b;
      --success-bg: #f3e5f5;
      --danger-bg: #ffebee;
      --warning-bg: #fff8e1;
      --info-bg: #fce4ec;

      /* Lane barvy pro pink mode */
      --lane-1-border: #e91e63;
      --lane-1-bg: #fce4ec;
      --lane-2-border: #f06292;
      --lane-2-bg: #fdf2f8;
      --lane-3-border: #ff4081;
      --lane-3-bg: #fff0f3;
    }

    /* Green mode promƒõnn√© */
    [data-theme="green"] {
      --bg-color: #f1f8e9;
      --bg-secondary: #e8f5e8;
      --text-color: #1b5e20;
      --text-muted: #4e7c59;
      --border-color: #a5d6a7;
      --card-bg: #f9fbe7;
      --navbar-bg: #dcedc8;
      --input-bg: #f1f8e9;
      --input-border: #a5d6a7;
      --table-bg: #f9fbe7;
      --table-stripe: rgba(129, 199, 132, 0.15);
      --table-hover: rgba(129, 199, 132, 0.25);
      --alert-bg: #e8f5e8;
      --shadow: rgba(76, 175, 80, 0.2);
      --link-color: #2e7d32;
      --success-bg: #e8f5e8;
      --danger-bg: #ffebee;
      --warning-bg: #fff8e1;
      --info-bg: #e1f5fe;

      /* Lane barvy pro green mode */
      --lane-1-border: #4caf50;
      --lane-1-bg: #e8f5e8;
      --lane-2-border: #66bb6a;
      --lane-2-bg: #f1f8e9;
      --lane-3-border: #81c784;
      --lane-3-bg: #f9fbe7;
    }

    /* Aplikace promƒõnn√Ωch */
    body {
      padding: 20px;
      background-color: var(--bg-color);
      color: var(--text-color);
      transition: background-color 0.3s ease, color 0.3s ease;
    }

    /* Navbar styly */
    .navbar {
      background-color: var(--navbar-bg) !important;
      border-bottom: 1px solid var(--border-color);
    }

    .navbar-brand,
    .nav-link {
      color: var(--text-color) !important;
    }

    /* Karty a containery */
    .card {
      background-color: var(--card-bg);
      border-color: var(--border-color);
      box-shadow: 0 0.125rem 0.25rem var(--shadow);
    }

    .card-header {
      background-color: var(--bg-secondary);
      border-bottom-color: var(--border-color);
      color: var(--text-color);
    }

    .card-body {
      background-color: var(--card-bg);
      color: var(--text-color);
    }

    .card-title,
    .card-subtitle,
    .card-text {
      color: var(--text-color) !important;
    }

    /* Bootstrap color classes override pro dark mode */
    [data-theme="dark"] .text-primary {
      color: #66b3ff !important;
    }

    [data-theme="pink"] .text-primary {
      color: #e91e63 !important;
    }

    [data-theme="green"] .text-primary {
      color: #4caf50 !important;
    }

    /* Formul√°≈ôe */
    .form-control,
    .form-select {
      background-color: var(--input-bg);
      border-color: var(--input-border);
      color: var(--text-color);
    }

    .form-control:focus,
    .form-select:focus {
      background-color: var(--input-bg);
      border-color: #86b7fe;
      color: var(--text-color);
      box-shadow: 0 0 0 0.25rem rgba(13, 110, 253, 0.25);
    }

    /* Tabulky - vylep≈°en√© pro dark mode */
    .table {
      --bs-table-bg: var(--table-bg);
      --bs-table-striped-bg: var(--table-stripe);
      --bs-table-hover-bg: var(--table-hover);
      color: var(--text-color);
      border-color: var(--border-color);
    }

    .table th,
    .table td {
      border-color: var(--border-color);
      color: var(--text-color);
    }

    .table-light {
      --bs-table-bg: var(--bg-secondary);
      --bs-table-color: var(--text-color);
      color: var(--text-color) !important;
    }

    .table-light th,
    .table-light td {
      background-color: var(--bg-secondary) !important;
      color: var(--text-color) !important;
      border-color: var(--border-color) !important;
    }

    /* Alerty - vylep≈°en√© barvy */
    .alert {
      color: var(--text-color);
      border-color: var(--border-color);
    }

    .alert-success {
      background-color: var(--success-bg);
      border-color: var(--border-color);
      color: var(--text-color);
    }

    .alert-danger {
      background-color: var(--danger-bg);
      border-color: var(--border-color);
      color: var(--text-color);
    }

    .alert-warning {
      background-color: var(--warning-bg);
      border-color: var(--border-color);
      color: var(--text-color);
    }

    .alert-info {
      background-color: var(--info-bg);
      border-color: var(--border-color);
      color: var(--text-color);
    }

    /* Buttony - vylep≈°en√© pro dark mode */
    .btn-outline-secondary {
      color: var(--text-color);
      border-color: var(--border-color);
    }

    .btn-outline-secondary:hover,
    .btn-outline-secondary:focus {
      background-color: var(--bg-secondary);
      color: var(--text-color);
      border-color: var(--text-color);
    }

    .btn-outline-primary:hover,
    .btn-outline-success:hover,
    .btn-outline-danger:hover,
    .btn-outline-warning:hover,
    .btn-outline-info:hover {
      color: #fff !important;
    }

    /* Linky */
    a {
      color: var(--link-color);
    }

    a:hover {
      color: var(--link-color);
      opacity: 0.8;
    }

    /* Text barvy - vylep≈°en√© */
    .text-muted {
      color: var(--text-muted) !important;
    }

    .text-success {
      color: #20c997 !important;
    }

    .text-danger {
      color: #dc3545 !important;
    }

    .text-warning {
      color: #ffc107 !important;
    }

    .text-info {
      color: #0dcaf0 !important;
    }

    /* Dark mode specifick√© vylep≈°en√≠ pro badges */
    [data-theme="dark"] .badge.bg-light {
      background-color: #6c757d !important;
      color: #fff !important;
    }

    [data-theme="dark"] .badge.bg-secondary {
      background-color: #495057 !important;
      color: #fff !important;
    }

    [data-theme="dark"] .text-dark {
      color: var(--text-color) !important;
    }

    /* Dark mode vylep≈°en√≠ pro homepage */
    [data-theme="dark"] h1,
    [data-theme="dark"] h2,
    [data-theme="dark"] h3,
    [data-theme="dark"] h4,
    [data-theme="dark"] h5,
    [data-theme="dark"] h6 {
      color: var(--text-color) !important;
    }

    [data-theme="dark"] .display-1 {
      filter: grayscale(100%) brightness(1.5) !important;
    }

    /* Pink/Green mode nadpisy */
    [data-theme="pink"] h1,
    [data-theme="pink"] h2,
    [data-theme="pink"] h3,
    [data-theme="pink"] h4,
    [data-theme="pink"] h5,
    [data-theme="pink"] h6 {
      color: var(--text-color) !important;
    }

    [data-theme="green"] h1,
    [data-theme="green"] h2,
    [data-theme="green"] h3,
    [data-theme="green"] h4,
    [data-theme="green"] h5,
    [data-theme="green"] h6 {
      color: var(--text-color) !important;
    }

    /* Small text vylep≈°en√≠ */
    small,
    .small {
      color: var(--text-muted);
    }

    /* Bordery */
    .border {
      border-color: var(--border-color) !important;
    }

    /* Lane specifick√© styly */
    .lane {
      min-height: 200px;
      border: 1px dashed #888;
      padding: 8px;
      background-color: var(--bg-secondary);
    }

    .lane-summary {
      border: 2px solid var(--border-color);
      padding: 15px;
      margin: 10px 0;
      border-radius: 8px;
      background-color: var(--card-bg);
    }

    .lane-1 {
      border-color: var(--lane-1-border);
      background-color: var(--lane-1-bg);
    }

    .lane-2 {
      border-color: var(--lane-2-border);
      background-color: var(--lane-2-bg);
    }

    .lane-3 {
      border-color: var(--lane-3-border);
      background-color: var(--lane-3-bg);
    }

    /* Dark mode p≈ôep√≠naƒç - zjednodu≈°en√Ω */
    .theme-toggle {
      background: var(--bg-secondary);
      border: 2px solid var(--border-color);
      color: var(--text-color);
      padding: 0.5rem 0.75rem;
      border-radius: 50%;
      cursor: pointer;
      transition: all 0.3s ease;
      font-size: 1.2em;
      width: 45px;
      height: 45px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .theme-toggle:hover {
      background-color: var(--card-bg);
      transform: scale(1.1) rotate(15deg);
      box-shadow: 0 4px 12px var(--shadow);
    }

    .theme-toggle:active {
      transform: scale(0.95);
    }

    /* Animace pro p≈ôep√≠naƒç */
    .theme-toggle.switching {
      animation: themeSwitch 0.6s ease;
    }

    @keyframes themeSwitch {
      0% {
        transform: scale(1) rotate(0deg);
      }

      25% {
        transform: scale(1.2) rotate(90deg);
      }

      50% {
        transform: scale(0.8) rotate(180deg);
      }

      75% {
        transform: scale(1.1) rotate(270deg);
      }

      100% {
        transform: scale(1) rotate(360deg);
      }
    }

    /* Dropdown menu styly */
    .dropdown-menu {
      background-color: var(--card-bg);
      border-color: var(--border-color);
      box-shadow: 0 0.5rem 1rem var(--shadow);
    }

    .dropdown-item {
      color: var(--text-color);
    }

    .dropdown-item:hover,
    .dropdown-item:focus {
      background-color: var(--bg-secondary);
      color: var(--text-color);
    }

    .dropdown-divider {
      border-color: var(--border-color);
    }

    /* Progress bar vylep≈°en√≠ */
    .progress {
      background-color: var(--bg-secondary);
      border: 1px solid var(--border-color);
    }

    .progress-bar {
      color: #fff;
    }

    /* Form kontroly vylep≈°en√≠ */
    .form-check-input:checked {
      background-color: #0d6efd;
      border-color: #0d6efd;
    }

    .form-check-input:focus {
      border-color: #86b7fe;
      box-shadow: 0 0 0 0.25rem rgba(13, 110, 253, 0.25);
    }

    [data-theme="dark"] .form-check-input {
      background-color: var(--input-bg);
      border-color: var(--input-border);
    }

    /* Loading spinner v dark mode */
    [data-theme="dark"] .loading-spinner {
      background-color: #0d6efd !important;
      color: #fff !important;
    }

    /* Navbar brand vylep≈°en√≠ */
    .navbar-brand:hover,
    .nav-link:hover {
      color: var(--link-color) !important;
    }

    /* Specifick√© √∫pravy pro lep≈°√≠ ƒçitelnost */
    [data-theme="dark"] .bg-light {
      background-color: var(--bg-secondary) !important;
      color: var(--text-color) !important;
    }

    [data-theme="dark"] .border {
      border-color: var(--border-color) !important;
    }

    /* Tooltips */
    .tooltip .tooltip-inner {
      background-color: var(--card-bg);
      color: var(--text-color);
      border: 1px solid var(--border-color);
    }

    /* Dropdown formul√°≈ôe */
    .dropdown-item-form {
      margin: 0;
      padding: 0;
    }

    .dropdown-item-form .dropdown-item {
      border: none;
      background: none;
      width: 100%;
      text-align: left;
      padding: 0.375rem 1rem;
    }

    .dropdown-item-form .dropdown-item:hover {
      background-color: var(--bg-secondary);
    }

    /* Truck visualization adjustments */
    .truck-layout {
      background: var(--card-bg);
      border: 1px solid var(--border-color);
    }

    .truck-lane {
      background: var(--card-bg);
      border-right: 1px solid var(--border-color);
    }

    .truck-lane.unassigned {
      background: var(--bg-secondary);
      border: 2px dashed var(--text-muted);
    }

    .lane-header {
      background: var(--card-bg);
      border-bottom: 2px solid var(--border-color);
      color: var(--text-color);
    }

    /* Drop zones */
    .drop-zone.drag-over {
      background-color: rgba(13, 110, 253, 0.15);
    }

    [data-theme="dark"] .drop-zone.drag-over {
      background-color: rgba(77, 171, 247, 0.15);
    }
  </style>
</head>

<body>
  <div class="container">
    {% if request.endpoint != 'index' %}
    <nav class="navbar navbar-expand-lg navbar-light mb-4" style="background-color: #ffebee;">
      <div class="container-fluid">
        <a class="navbar-brand fw-bold" href="/beta">Hueppe - spr√°va zak√°zek</a>
        <div class="navbar-nav ms-auto">
          <a class="nav-link fw-bold" href="/beta">üè† Dom≈Ø</a>
          <a class="nav-link fw-bold" href="{{ url_for('loading_orders') }}">Zak√°zky</a>
          <a class="nav-link fw-bold" href="{{ url_for('lsa_tables') }}">üìã LSA Tabulky</a>
          <a class="nav-link fw-bold" href="{{ url_for('archive') }}">üì¶ Archiv</a>
          <a class="nav-link fw-bold" href="{{ url_for('imported_files') }}">Importovan√© soubory</a>
          <a class="nav-link fw-bold" href="{{ url_for('settings') }}">Nastaven√≠</a>

          <!-- Theme selector dropdown -->
          <div class="dropdown">
            <button class="theme-toggle dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false"
              id="themeToggle" title="Vybrat t√©ma">
              <span id="themeIcon">üåô</span>
            </button>
            <ul class="dropdown-menu dropdown-menu-end">
              <li><button class="dropdown-item" type="button" onclick="setTheme('light')">‚òÄÔ∏è Svƒõtl√Ω re≈æim</button></li>
              <li><button class="dropdown-item" type="button" onclick="setTheme('dark')">üåô Tmav√Ω re≈æim</button></li>
              <li><button class="dropdown-item" type="button" onclick="setTheme('pink')">üå∏ R≈Ø≈æov√Ω re≈æim</button></li>
              <li><button class="dropdown-item" type="button" onclick="setTheme('green')">üå± Zelen√Ω re≈æim</button></li>
            </ul>
          </div>
        </div>
      </div>
    </nav>

    <h1>Hueppe - spr√°va zak√°zek</h1>
    {% else %}
    <h1 class="text-center mb-5">Hueppe - spr√°va zak√°zek</h1>
    {% endif %}
    {% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
    {% for cat, msg in messages %}
    <div class="alert alert-{{cat}}">{{msg}}</div>
    {% endfor %}
    {% endif %}
    {% endwith %}
    {% block content %}{% endblock %}
  </div>

  <!-- Bootstrap JavaScript -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

  <!-- Dark Mode funkcionalita - roz≈°√≠≈ôen√° pro v√≠ce t√©mat -->
  <script>
    // Theme management - roz≈°√≠≈ôen√Ω pro v√≠ce t√©mat
    const THEME_KEY = 'hueppe-theme';

    // Definice t√©mat
    const THEMES = {
      'light': {
        name: 'Svƒõtl√Ω re≈æim',
        icon: '‚òÄÔ∏è'
      },
      'dark': {
        name: 'Tmav√Ω re≈æim',
        icon: 'üåô'
      },
      'pink': {
        name: 'Bobk≈Øv re≈æim',
        icon: 'üå∏'
      },
      'green': {
        name: 'Zelen√Ω re≈æim',
        icon: 'üå±'
      }
    };

    // Z√≠sk√°n√≠ aktu√°ln√≠ho t√©matu
    function getCurrentTheme() {
      return localStorage.getItem(THEME_KEY) || 'light';
    }

    // Aplikace t√©matu
    function applyTheme(theme) {
      if (!THEMES[theme]) {
        theme = 'light'; // Fallback
      }

      document.documentElement.setAttribute('data-theme', theme);

      // Aktualizace ikony
      const icon = document.getElementById('themeIcon');
      const toggle = document.getElementById('themeToggle');

      if (icon && toggle) {
        icon.textContent = THEMES[theme].icon;
        toggle.title = `Aktu√°ln√≠ t√©ma: ${THEMES[theme].name}`;
      }

      // Oznaƒçit aktivn√≠ polo≈æku v dropdownu
      const dropdownItems = document.querySelectorAll('.dropdown-item');
      dropdownItems.forEach(item => {
        item.classList.remove('active');
        if (item.textContent.includes(THEMES[theme].name)) {
          item.classList.add('active');
        }
      });
    }

    // Toggle mezi svƒõtl√Ωm a tmav√Ωm re≈æimem (pro zpƒõtnou kompatibilitu)
    function toggleTheme() {
      const currentTheme = getCurrentTheme();
      const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
      setTheme(newTheme);
    }

    // Nastaven√≠ t√©matu
    function setTheme(theme) {
      if (!THEMES[theme]) {
        console.warn(`Nezn√°m√© t√©ma: ${theme}, pou≈æiji light`);
        theme = 'light';
      }

      localStorage.setItem(THEME_KEY, theme);
      applyTheme(theme);

      // Animace pro smooth p≈ôechod
      document.body.style.transition = 'background-color 0.4s ease, color 0.4s ease';

      // Show feedback
      showThemeChangeMessage(theme);
    }

    // Zobrazen√≠ zpr√°vy o zmƒõnƒõ t√©matu
    function showThemeChangeMessage(theme) {
      const themeData = THEMES[theme];
      if (!themeData) return;

      // Vytvo≈ôen√≠ toast zpr√°vy
      const toast = document.createElement('div');
      toast.className = 'alert alert-success theme-change-toast';
      toast.innerHTML = `
        <strong>${themeData.icon} ${themeData.name}</strong> aktivov√°n
      `;
      toast.style.cssText = `
        position: fixed;
        top: 80px;
        right: 20px;
        z-index: 9999;
        min-width: 200px;
        opacity: 0;
        transform: translateX(100%);
        transition: all 0.4s ease;
        border: 1px solid var(--border-color);
        background-color: var(--success-bg);
        color: var(--text-color);
        box-shadow: 0 4px 12px var(--shadow);
      `;

      document.body.appendChild(toast);

      // Animace zobrazen√≠
      setTimeout(() => {
        toast.style.opacity = '1';
        toast.style.transform = 'translateX(0)';
      }, 100);

      // Automatick√© skryt√≠
      setTimeout(() => {
        toast.style.opacity = '0';
        toast.style.transform = 'translateX(100%)';
        setTimeout(() => {
          if (toast.parentElement) {
            document.body.removeChild(toast);
          }
        }, 400);
      }, 2500);
    }

    // Inicializace p≈ôi naƒçten√≠ str√°nky
    document.addEventListener('DOMContentLoaded', function () {
      const savedTheme = getCurrentTheme();
      applyTheme(savedTheme);

      console.log(`Hueppe: Naƒçteno t√©ma "${savedTheme}"`);
    });

    // Kl√°vesov√° zkratka pro rychl√© p≈ôepnut√≠ t√©matu (Ctrl/Cmd + Shift + D)
    document.addEventListener('keydown', function (e) {
      if ((e.ctrlKey || e.metaKey) && e.shiftKey && e.key === 'D') {
        e.preventDefault();
        toggleTheme();
      }
    });
  </script>
</body>

</html>